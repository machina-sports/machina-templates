workflow:
  name: "openai-test-credentials"
  title: "OpenAI - Test Credentials"
  description: "Simple workflow to test OpenAI API credentials."
  context-variables:
    debugger:
      enabled: true
    openai:
      api_key: $TEMP_CONTEXT_VARIABLE_OPENAI_API_KEY
  outputs:
    result: "$.get('models', [])"
    workflow-status: "$.get('workflow-status', 'skipped')"
  tasks:

    - type: connector
      name: openai-test-credentials-task
      description: Test credentials by listing available models.
      connector:
        name: openai
        command: list_models
      inputs:
        api_key: "$.get('api_key')"
      outputs:
        models: "$.get('data', {}).get('models', [])"
        workflow-status: "'executed'"
