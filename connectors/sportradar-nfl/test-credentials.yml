workflow:
  name: "sportradar-nfl-test-credentials"
  title: "Sportradar NFL - Test Credentials"
  description: "Simple workflow to test Sportradar NFL API credentials."
  context-variables:
    debugger:
      enabled: true
    sportradar-nfl:
      api_key: $TEMP_CONTEXT_VARIABLE_SPORTRADAR_NFL_API_KEY
  outputs:
    result: "$.get('test_result', {})"
    workflow-status: "$.get('workflow-status', 'skipped')"
  tasks:

    - type: connector
      name: sportradar-nfl-test-credentials-task
      description: Test credentials by fetching NFL teams list.
      connector:
        name: sportradar-nfl
        command: get-league/{data_type}
        command_attribute:
          data_type: "'teams.json'"
      inputs:
        api_key: "$.get('api_key')"
      outputs:
        test_result: |
          {
            'status': 'success' if $.get('teams') else 'error',
            'teams_count': len($.get('teams', [])),
            'sample': [
              {'id': t.get('id'), 'name': t.get('name'), 'alias': t.get('alias')}
              for t in $.get('teams', [])[:5]
            ] if $.get('teams') else []
          }
        workflow-status: "'executed'"
