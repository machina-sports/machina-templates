mappings:

  # machina-football-team-mapping
  - type: mapping
    title: "IPTC | Machina Football Team Mapping"
    name: "machina-football-team-mapping"
    description: "Mapping data from Machina Football Data to IPTC Sport Schema team format"
    outputs:
      sport_schema_teams: |
        [
          {
            '@context': {
              'sport': 'https://www.sportschema.org/ontologies/sport#',
              'schema': 'https://schema.org/'
            },
            '@id': f"urn:machina:team:{t.get('id', '')}",
            '@type': ['sport:Team', 'schema:SportsTeam'],
            'name': t.get('name', ''),
            'title': t.get('name', ''),
            'schema:name': t.get('name', ''),
            'sport:officialName': t.get('name', ''),
            'sport:shortName': t.get('short_name', t.get('name', '')),
            'sport:code': t.get('abbreviation', ''),
            'sport:abbreviation': t.get('abbreviation', ''),
            'sport:country': t.get('country', ''),
            'sport:countryCode': t.get('country_code', ''),
            'sport:status': 'active'
          }
          for t in $.get('teams_raw', [])
        ]
