workflow:
  name: "google-storage-test-upload"
  title: "Google Storage Test Upload"
  description: "Workflow to test the Google Storage upload."
  context-variables:
    debugger:
      enabled: true
    google-storage:
      api_key: "$MACHINA_CONTEXT_VARIABLE_GOOGLE_STORAGE_API_KEY"
      bucket_name: "$MACHINA_CONTEXT_VARIABLE_GOOGLE_STORAGE_BUCKET_NAME"
    openai:
      api_key: "$MACHINA_CONTEXT_VARIABLE_OPENAI_API_KEY"
  inputs:
    image_path: "$.get('image_path')" # Can be a local file path or HTTP/HTTPS URL
  outputs:
    data: "$.get('data')"
    url: "$.get('data.url')"
    path: "$.get('data.path')"
    message: "$.get('data.message')"
    workflow-status: "$.get('workflow-status', 'skipped')"
  tasks:

    # 1 test-upload
    - type: "connector"
      name: "test-upload"
      description: "Test the Google Storage upload (supports both local file paths and HTTP/HTTPS URLs)."
      connector:
        name: "google-storage"
        command: "invoke_upload"
      inputs:
        api_key: "$.get('api_key')"
        image_path: "$.get('image_path')"
      outputs:
        data: "$"
        workflow-status: "'executed'"
