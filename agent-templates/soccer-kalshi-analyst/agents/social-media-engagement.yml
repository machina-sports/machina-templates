agent:
  name: social-media-engagement
  title: Social Media Engagement Agent
  description: |
    An agent that generates engaging social media content from soccer match predictions
    and Kalshi market analysis, including Twitter threads.
  context:
    config-frequency: 10
    status: "inactive"
  context-agent:
    eventCode: "$.get('eventCode')"
  workflows:

    # 1. Generate the Twitter thread
    - name: soccer-generate-twitter-thread
      description: Generate an engaging Twitter thread for the specified match
      inputs:
        eventCode: $.get('eventCode')
      outputs:
        thread_document_id: $.get('thread_document_id')
        thread_ready: $.get('workflow-status', 'skipped') == 'executed'

    # 2. Fetch mascot images & generate podcast frames for both teams
    - name: soccer-fetch-mascot-images
      description: Fetch mascot images and generate podcast studio frames for home and away teams
      inputs:
        eventCode: $.get('eventCode')
      outputs:
        mascot_document_id: $.get('mascot_document_id')
        home_mascot_url: $.get('home_mascot_url')
        away_mascot_url: $.get('away_mascot_url')
        home_podcast_frame_url: $.get('home_podcast_frame_url')
        away_podcast_frame_url: $.get('away_podcast_frame_url')
        mascots_ready: $.get('workflow-status', 'skipped') == 'executed'

    # 3. Generate a podcast-style two-actor dialogue script (clip-ready)
    - name: soccer-generate-podcast-dialogue
      description: Generate a HOME vs AWAY podcast dialogue script for the specified match
      inputs:
        eventCode: $.get('eventCode')
      outputs:
        podcast_script_document_id: $.get('podcast_script_document_id')
        podcast_script_ready: $.get('workflow-status', 'skipped') == 'executed'

    # 4. Generate podcast videos from transcript and mascot frames
    - name: soccer-generate-podcast-videos
      description: Generate AI videos for each podcast segment using mascot frames, then consolidate into a single video
      condition: $.get('mascots_ready') == True and $.get('podcast_script_ready') == True
      inputs:
        eventCode: $.get('eventCode')
      outputs:
        podcast_videos_document_id: $.get('podcast_videos_document_id')
        final_video_url: $.get('final_video_url')
        videos_ready: $.get('workflow-status', 'skipped') == 'executed'