agent:
  name: soccer-kalshi-analyst
  title: Soccer Kalshi Analyst Agent
  description: Monitors upcoming soccer fixtures, generates high-fidelity AI forecasts using Poisson Monte Carlo simulations, and identifies tradable edges on Kalshi prediction markets.
  context:
    config-frequency: 10
    status: "inactive"
  context-agent:
    fixture_id: "$.get('fixture_id')"
  workflows:
  
    # 1. Consumer: Find upcoming fixtures needing analysis
    - name: soccer-kalshi-analysis-consumer
      description: Identify upcoming soccer fixtures for AI forecasting
      inputs:
        fixture_id: $.get('fixture_id')
      outputs:
        analysis_fixture_id: $.get('fixture_id')
        analysis_fixture_exists: $.get('workflow-status', 'skipped') == 'executed'

    # 2. Executor: Run the full forecasting and market integration pipeline
    - name: soccer-forecast-match
      description: Execute statistical modeling, news gathering, and Kalshi market analysis
      condition: $.get('analysis_fixture_exists') is True
      inputs:
        fixture_id: $.get('analysis_fixture_id')
      outputs:
        forecast_document_id: $.get('prediction_document_id')
        forecast_executor_status: $.get('workflow-status', 'skipped') == 'executed'

    # 3. Update: Finalize version control and status
    - name: soccer-kalshi-analysis-update
      description: Finalize analysis status and update document versioning
      condition: $.get('analysis_fixture_exists') is True
      inputs:
        fixture_id: $.get('analysis_fixture_id')
        is_finished: $.get('forecast_executor_status') == 'executed'
      outputs:
        analysis_update_status: $.get('workflow-status', 'skipped') == 'executed'
