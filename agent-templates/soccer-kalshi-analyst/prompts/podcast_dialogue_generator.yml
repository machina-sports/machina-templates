prompt:
  name: podcast_dialogue_generator
  title: Podcast Dialogue Generator (Home vs Away)
  instructions: |
    ## CRITICAL: READ THIS FIRST
    You are writing a VIRAL podcast script. NOT a sports analysis. NOT a news report. This is ENTERTAINMENT.
    
    Think: Two best friends who support rival teams, talking trash over beers. They're competitive, they're loud, they interrupt each other, they make fun of each other's teams—but it's all love at the end.
    
    If your output sounds like a ESPN commentator or a formal analyst, YOU HAVE FAILED. Start over.

    ### INPUT DATA:
    AI PREDICTION:
    {{ prediction_doc | json }}

    KALSHI ANALYSIS:
    {{ kalshi_analysis_doc | json }}

    ## TONE CHECK (MUST PASS ALL):
    ✅ Would this make someone laugh out loud?
    ✅ Would someone screenshot this and share it?
    ✅ Does this sound like two friends arguing, not two analysts debating?
    ✅ Is there at least one joke or burn per turn?
    ✅ Would this get engagement on social media?
    
    If any answer is NO, rewrite it.

    ## OPENER (FIRST TURN - HOME SPEAKER)
    Must naturally introduce the matchup with personality. Examples:
    - "Alright, let's talk about my [HOME TEAM] hosting your [AWAY TEAM]... and honestly? I'm sweating already."
    - "So we've got my [HOME TEAM] vs your [AWAY TEAM] coming up, and I need to mentally prepare myself for this disaster."
    - "Ok, my [HOME TEAM] against your [AWAY TEAM]... tell me why I shouldn't just turn off notifications now?"

    ## LANGUAGE RULES (NON-NEGOTIABLE)
    **First Person ALWAYS:**
    - HOME speaker: "my [team]", "we", "us", "our defense", "my lads"
    - AWAY speaker: "my [team]", "we", "us", "your defense", "you guys"
    
    **NEVER SAY:**
    - "The home team" / "the away team"
    - "[Team] is struggling" → Say "we're struggling"
    - "[Team] hosts [Team]" → Say "my [team] hosting your [team]"
    - Any formal analyst language

    ## BANTER STYLE (THE SECRET SAUCE)
    
    **Reactions & Comebacks:**
    - "Oh come ON, that's ridiculous!"
    - "Hold up, hold up—are we watching the same team?"
    - "Nah, you're delusional mate"
    - "Wait wait wait, you can't be serious right now"
    - "That's actually hilarious coming from you"
    - "I'm gonna pretend I didn't hear that"
    
    **Roasting (Keep it about TEAMS, not personal):**
    - "Your defense is an absolute disaster movie right now"
    - "We're about to cook you guys like a Sunday roast"
    - "Your backline has more holes than Swiss cheese"
    - "That's like bringing a water pistol to a firefight"
    - "Your team's been folding like a cheap lawn chair lately"
    - "We're coming in like a wrecking ball and you know it"
    
    **Self-Deprecating (HOME fan admitting struggle):**
    - "Look, I'm not gonna lie—we've been absolutely tragic"
    - "Our form? Don't even get me started, it's embarrassing"
    - "I can't even defend this, we've been shocking"
    
    **Hyping Your Own Team:**
    - "But when we click? It's game over for you"
    - "We're DANGEROUS when we're on"
    - "Don't sleep on us, that's all I'm saying"

    ## THE CONVERSATION ARC

    **Turns 1-3: Setup & Initial Trash Talk**
    - HOME introduces matchup, shows some worry but defends team
    - AWAY immediately roasts them with the data
    - Back and forth establishing the rivalry energy

    **Turns 4-6: Deep Dive & Key Points**
    - Discuss injuries, tactical mismatches, recent form
    - Use the actual data from prediction_doc
    - Keep roasting while dropping real insights

    **Turns 7-9: Reality Check & Convergence**
    - Both start acknowledging the truth
    - HOME reluctantly admits the data is brutal (if it favors AWAY)
    - Tone shifts from denial to acceptance

    **Turns 10-12: Conclusion & Engagement CTA**
    - Agree on the prediction
    - Final score prediction
    - END WITH ENGAGEMENT: Ask viewers to comment their prediction!

    ## MANDATORY ENDING (LAST 1-2 TURNS)
    The conversation MUST end with asking fans to engage. Examples:
    - "Alright, that's our take—[SCORE] for [TEAM]. Drop your prediction in the comments, let's see who's right!"
    - "So we're calling it [SCORE]. What do YOU think? Comment below and let us know if we're crazy!"
    - "Final answer: [TEAM] takes it [SCORE]. Do you agree or are we totally wrong? Tell us in the comments!"
    - "There it is—[TEAM] wins [SCORE]. Now it's your turn, drop your prediction and let's argue about it!"

    ## FACT RULES
    - Use ONLY information from the input documents
    - Don't invent players, injuries, or stats not in the data
    - If Kalshi analysis is missing or should_trade is false, don't mention betting markets
    - If abstain_recommended is true, frame it as "this one's a trap, we're both staying away"

    ## STRUCTURE REQUIREMENTS
    - 10-12 turns total (alternating HOME/AWAY)
    - Each turn: 14-22 words MAX (must fit in 8-second video clip)
    - Short, punchy sentences—no run-on paragraphs
    - Every turn needs energy—no flat, boring lines

    ## EXAMPLE DIALOGUE (FOLLOW THIS ENERGY):
    
    HOME: "Alright, my West Ham hosting your Brighton this weekend... and mate, I'm genuinely nervous about this one."
    
    AWAY: "Nervous? You SHOULD be! The model's got us at 52% and honestly that feels generous to you guys."
    
    HOME: "Come on, that's harsh! We've got Paquetá back, we can hurt you on the counter..."
    
    AWAY: "Counter what? Your full-backs are out! Mitoma's gonna be running at rookies all night, it's a buffet!"
    
    HOME: "Okay that's fair, losing Wan-Bissaka and Diouf is brutal timing. Our flanks are exposed."
    
    AWAY: "EXPOSED? Mate, your defense has more gaps than a London tube schedule. We're feasting!"
    
    HOME: "You know what, the numbers don't lie. We've been conceding for fun at home lately."
    
    AWAY: "Over two goals a game at home! That's not a defense, that's an open invitation!"
    
    HOME: "Fine, I'll admit it—you've got us. If you score early, the whole stadium turns on us."
    
    AWAY: "That toxic atmosphere works in our favor. One early goal and it's game over for you psychologically."
    
    HOME: "Alright, I'm calling it—your Brighton takes this 2-1. I hate it but the data's clear."
    
    AWAY: "2-1 Brighton, we agree! Now drop YOUR prediction in the comments—who you got?"
  schema:
    title: podcast_dialogue_generator_output
    description: A two-actor podcast dialogue split into short clip-ready turns
    type: object
    required: ["home_team", "away_team", "turns"]
    properties:
      home_team:
        type: string
        description: Name of the home team
      away_team:
        type: string
        description: Name of the away team
      turns:
        type: array
        minItems: 10
        maxItems: 12
        items:
          type: object
          required: ["speaker", "text", "max_duration_seconds"]
          properties:
            speaker:
              type: string
              enum: ["HOME", "AWAY"]
              description: Which fan is speaking
            text:
              type: string
              description: The dialogue line (14-22 words, must fit 8-second clip)
            max_duration_seconds:
              type: number
              description: Maximum duration for this clip
              minimum: 1
              maximum: 8
