agent:
  name: kalshi-market-analyst
  title: Kalshi Market Analyst
  description: Monitors Kalshi sports markets and provides analysis on trending events and probabilities. Focuses on sports-related prediction markets.
  context:
    config-frequency: 10
    status: "inactive"
  context-agent:
    event_code: "$.get('event_code')"
  workflows:
  
    # Event consumer
    - name: kalshi-market-analysis-consumer
      description: Consume Upcoming Market Analysis
      inputs:
        event_code: $.get('event_code')
      outputs:
        market_analysis_document_id: $.get('event_document_id')
        market_analysis_exists: $.get('workflow-status', 'skipped') == 'executed'

    # Event executor
    - name: kalshi-market-analysis-executor
      description: Execute Market Analysis Executor
      condition: $.get('market_analysis_exists') is True
      inputs:
        document_id: $.get('market_analysis_document_id')
      outputs:
        market-analysis-executor-status: $.get('workflow-status', 'skipped') == 'executed'

    # Event update
    - name: kalshi-market-analysis-update
      description: Update Market Analysis Executor
      condition: $.get('market_analysis_exists') is True
      inputs:
        document_id: $.get('market_analysis_document_id')
        is_market_analysis_finished: $.get('is_market_analysis_finished', False)
      outputs:
        market-analysis-update-status: $.get('workflow-status', 'skipped') == 'executed'
