agent:
  name: kalshi-market-analyst
  title: Kalshi Market Analyst
  description: Monitors Kalshi sports markets and provides analysis on trending events and probabilities. Focuses on sports-related prediction markets.
  context:
    config-frequency: 10
    status: "inactive"
  context-agent:
    event_code: "$.get('event_code')"
  workflows:
  
    # Event consumer
    - name: kalshi-prediction-consumer
      description: Select Upcoming Prediction
      inputs:
        event_code: $.get('event_code')
      outputs:
        prediction_document_id: $.get('event_document_id')
        prediction_exists: $.get('workflow-status', 'skipped') == 'executed'

    # Event executor
    - name: kalshi-prediction-executor
      description: Execute Prediction
      condition: $.get('prediction_exists') is True
      inputs:
        document_id: $.get('prediction_document_id')
      outputs:
        prediction-executor-status: $.get('workflow-status', 'skipped') == 'executed'

    # Event update
    - name: kalshi-prediction-update
      description: Kalshi - Prediction Update
      condition: $.get('prediction_exists') is True
      inputs:
        document_id: $.get('prediction_document_id')
        is_prediction_finished: $.get('is_prediction_finished', False)
      outputs:
        prediction-update-status: $.get('workflow-status', 'skipped') == 'executed'
