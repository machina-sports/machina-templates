workflow:
  name: soccer-power-ranking-sync-league-fixtures
  title: Sync League Fixtures
  description: |
    Synchronize all fixtures from a league/season to sport:Event documents.
    This workflow delegates to the unified api-football-sync-fixtures workflow
    which saves fixtures in the IPTC sport:Event schema format.
  inputs:
    league_id: "$.get('league_id', '71')"
    season: "$.get('season', '2025')"
  outputs:
    fixtures_synced: "$.get('fixtures_synced', 0)"
    fixtures_total: "$.get('fixtures_total', 0)"
    workflow-status: "'executed'"
  tasks:

    # Delegate to the unified api-football-sync-fixtures workflow
    # which saves fixtures as sport:Event documents with IPTC schema
    - type: workflow
      name: sync-fixtures-to-sport-event
      description: Sync fixtures using the unified api-football-sync-fixtures workflow
      workflow: api-football-sync-fixtures
      inputs:
        league: "$.get('league_id')"
        season: "$.get('season')"
      outputs:
        fixtures_synced: "len($.get('fixtures', []) or [])"
        fixtures_total: "len($.get('fixtures', []) or [])"
