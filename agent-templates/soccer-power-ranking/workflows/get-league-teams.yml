workflow:
  name: soccer-power-ranking-get-league-teams
  title: Soccer Power Ranking - Get League Teams
  description: Get all teams from a specific league and season using API Football.
  context-variables:
    debugger:
      enabled: true
    api-football:
      x-apisports-key: "$TEMP_CONTEXT_VARIABLE_API_FOOTBALL_API_KEY"
  inputs:
    league: "$.get('league')"
    season: "$.get('season', '2025')"
  outputs:
    teams: $.get('teams', [])
    team_ids: $.get('team_ids', [])
    workflow-status: "'executed'"
  tasks:

    - type: connector
      name: api-football-get-teams
      description: Get teams from API Football for the specified league and season.
      connector:
        name: api-football
        command: get-teams
      inputs:
        league: "$.get('league')"
        season: "$.get('season')"
      outputs:
        teams: "$.get('response', [])"
        team_ids: |
          [
            team.get('team', {}).get('id')
            for team in $.get('response', [])
            if team.get('team', {}).get('id')
          ]

