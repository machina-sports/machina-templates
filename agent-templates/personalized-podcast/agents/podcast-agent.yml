agent:
  name: personalized-podcast-agent
  title: Personalized Podcast Agent
  description: "Agent to manage user profile workflows: store profile, generate personalized content, generate audio, generate image, and send email"
  context-agent:
    name: $.get('name')
    favorite_sport: $.get('favorite_sport')
    favorite_team: $.get('favorite_team')
    podcast_mood_tone: $.get('podcast_mood_tone')
    sports_knowledge: $.get('sports_knowledge')
    email_address: $.get('email_address')
    country: $.get('country')
    language: $.get('language')
    from_email: $.get('from_email')
    mailgun_domain: $.get('mailgun_domain')
    allow_machina_outreach: $.get('allow_machina_outreach')
    allow_data_usage: $.get('allow_data_usage')
  workflows:

    # personalized-podcast-store-user-profile
    - name: personalized-podcast-store-user-profile
      description: "Store user profile information from frontend application"
      inputs:
        country: "$.get('country')"
        email_address: "$.get('email_address')"
        favorite_sport: "$.get('favorite_sport')"
        favorite_team: "$.get('favorite_team')"
        language: "$.get('language')"
        name: "$.get('name')"
        podcast_mood_tone: "$.get('podcast_mood_tone')"
        sports_knowledge: "$.get('sports_knowledge')"
        allow_machina_outreach: "$.get('allow_machina_outreach')"
        allow_data_usage: "$.get('allow_data_usage')"
      outputs:
        document_id: "$.get('document_id')"
        workflow-status: "$.get('workflow-status')"

    # personalized-podcast-generate-content
    - name: personalized-podcast-generate-content
      description: "Generate personalized podcast content (text only) based on user profile"
      condition: "$.get('document_id') is not None"
      inputs:
        document_id: "$.get('document_id')"
        max_queries: "$.get('max_queries', 3)"
        duration: "$.get('duration', 120)"
        language: "$.get('language', 'en')"
      outputs:
        document_id: "$.get('document_id')"
        workflow-status: "$.get('workflow-status')"
        audio_content: "$.get('audio_content')"
        user_profile: "$.get('user_profile')"
        favorite_sport: "$.get('favorite_sport')"
        favorite_team: "$.get('favorite_team')"
        user_name: "$.get('user_name')"

    # personalized-podcast-generate-audio
    - name: personalized-podcast-generate-audio
      description: "Generate personalized podcast audio and save to user profile document"
      condition: "$.get('document_id') is not None"
      inputs:
        document_id: "$.get('document_id')"
        voice_id: "$.get('voice_id')"
        model_id: "$.get('model_id', 'eleven_flash_v2_5')"
        language: "$.get('language', 'en')"
      outputs:
        document_id: "$.get('document_id')"
        workflow-status: "$.get('workflow-status')"
        audio_path: "$.get('audio_path')"
        audio_content: "$.get('audio_content')"

    # personalized-podcast-generate-image
    - name: personalized-podcast-generate-image
      description: "Generate personalized podcast image and save to user profile document"
      condition: "$.get('document_id') is not None"
      inputs:
        document_id: "$.get('document_id')"
        geo_location: "$.get('geo_location', 'Brazil')"
        limit: "$.get('limit', 3)"
        parser: "$.get('parser', 'true')"
        source: "$.get('source', 'google_search')"
        udm: "$.get('udm', 2)"
      outputs:
        document_id: "$.get('document_id')"
        workflow-status: "$.get('workflow-status')"
        image_path: "$.get('image_path')"
        image_url: "$.get('image_url')"

    # personalized-podcast-compose-and-send-email
    - name: personalized-podcast-compose-and-send-email
      description: "Compose HTML email template and send email with podcast"
      condition: "$.get('document_id') is not None"
      inputs:
        document_id: "$.get('document_id')"
        from_email: "$.get('from_email')"
        mailgun_domain: "$.get('mailgun_domain')"
        newsletter_template_path: "$.get('newsletter_template_path')"
      outputs:
        document_id: "$.get('document_id')"
        workflow-status: "$.get('workflow-status')"
        podcast-email-html: "$.get('podcast-email-html')"
        podcast-email-html-path: "$.get('podcast-email-html-path')"
        podcast-email-html-content: "$.get('podcast-email-html-content')"
        email-sent: "$.get('email-sent')"
        email-status: "$.get('email-status')"
        email-id: "$.get('email-id')"
