workflow:
  name: "populate-folders"
  title: "Setup Folders"
  description: "Setup Folders"
  outputs:
    workflow-status: "'executed'"
  tasks:

    # documents-structure
    - type: "document"
      name: "install-documents"
      description: "Install documents."
      condition: "$.get('setup-register') is not True or $.get('force-setup') is True"
      config:
        action: "update"
        embed-vector: false
        force-update: true
      documents:
        setup-playground: |
          [
            {
              "title": "Chat Completions",
              "name": "chat-completions",
            },
            {
              "title": "Generate Content",
              "name": "generate-content",
            }
          ]
        setup-register: |
          {
            "setup": True
          }
        site-structure: |
          [
            {
              "title": "NFL Podcast Generator",
              "url": "http://local.machina:3004/",
              "icon": "globe"
            }
          ]
        doc-structure: |
          [
            {
              "title": "Catalogue",
              "isActive": True,
              "icon": "folder",
              "items": [
                {
                  "name": "nfl-schedules",
                  "title": "NFL Games",
                  "description": "NFL game schedules synced from the Sportradar API.",
                  "category": "Catalogue",
                  "metadata": {
                    "name": ["nfl-game", "nfl-games"]
                  },
                  "sorters": ['_id', -1],
                  "view": "list"
                },
                {
                  "name": "nfl-players",
                  "title": "NFL Players",
                  "description": "NFL players synced from the Sportradar API.",
                  "category": "Catalogue",
                  "metadata": {
                    "name": ["nfl-player", "nfl-players"]
                  },
                  "sorters": ['_id', -1],
                  "view": "list"
                },
                {
                  "name": "nfl-teams",
                  "title": "NFL Teams",
                  "description": "NFL teams synced from the Sportradar API.",
                  "category": "Catalogue",
                  "metadata": {
                    "name": ["nfl-team", "nfl-teams"]
                  },
                  "sorters": ['_id', -1],
                  "view": "list"
                }
              ]
            },
            {
              "title": "Chat Threads",
              "isActive": True,
              "icon": "folder",
              "items": [
                {
                  "name": "chat-threads",
                  "title": "Messages",
                  "description": "The chat messages synced from the Chat API.",
                  "category": "Chat",
                  "metadata": {
                    "name": ["chat-message", "chat-messages", "message"]
                  },
                  "sorters": ['_id', -1],
                  "view": "list"
                }
              ]
            },
            {
              "title": "Embeddings",
              "isActive": True,
              "icon": "folder",
              "items": [
                {
                  "name": "reporter-snippets",
                  "title": "Snippets",
                  "description": "The snippets generated by the AI Reporter.",
                  "category": "Reporter",
                  "metadata": {
                    "name": ["content-snippet", "reporter-snippet"]
                  },
                  "sorters": ['_id', -1],
                  "view": "grid"
                }
              ]
            }
          ]
